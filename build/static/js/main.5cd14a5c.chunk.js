(this["webpackJsonpcrowd-funding"]=this["webpackJsonpcrowd-funding"]||[]).push([[0],{103:function(e,t){},104:function(e,t){},125:function(e,t){},126:function(e,t,n){"use strict";n.r(t);var a=n(14),r=n.n(a),c=n(69),i=n.n(c),s=(n(77),n(10)),u=n(4),o=function(e){var t=e.setRoute;return Object(u.jsxs)("div",{className:"ui menu black",style:{marginTop:"5px"},children:[Object(u.jsx)("a",{href:"/#",className:"ui header item",onClick:function(){return t(0)},children:"Funding"}),Object(u.jsx)("a",{href:"/#",className:"ui item",onClick:function(){return t(0)},children:"Campaigns"}),Object(u.jsx)("div",{className:"right menu",children:Object(u.jsx)("a",{href:"/#",className:"item",onClick:function(){return t(1)},children:"Create Campaign"})})]})},l=n(3),d=n(1),p=n.n(d),b=n(12),j=n(7),h=n(8),m=n(70),f=n(13),x=n(44),O="https://api.devnet.solana.com",g=new f.a(O,"confirmed"),v=new m.a("https://www.sollet.io",O),y=new f.b("286rapsUbvDe1ZgBeNhp37YHvEPwWPTr4Bkce4oMpUKT");function w(e){return k.apply(this,arguments)}function k(){return(k=Object(l.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new f.d,t.forEach((function(e){n.add(e)})),n.feePayer=v.publicKey,e.next=5,g.getRecentBlockhash();case 5:return a=e.sent,n.recentBlockhash=a.blockhash,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return S.apply(this,arguments)}function S(){return(S=Object(l.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("start signAndSendTransaction"),e.next=4,v.signTransaction(t);case 4:return n=e.sent,console.log("signed transaction"),e.next=8,g.sendRawTransaction(n.serialize());case 8:return a=e.sent,console.log("end signAndSendTransaction"),e.abrupt("return",a);case 13:throw e.prev=13,e.t0=e.catch(0),console.log("signAndSendTransaction error",e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}var C=Object(j.a)((function e(t){var n=this;Object(h.a)(this,e),Object.keys(t).forEach((function(e){n[e]=t[e]}))}));function A(){return T.apply(this,arguments)}function T(){return(T=Object(l.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v.connected){e.next=3;break}return e.next=3,v.connect();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e,t,n){return I.apply(this,arguments)}function I(){return(I=Object(l.a)(p.a.mark((function e(t,n,a){var r,c,i,s,u,o,l,d,j,h,m;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:return r="abcdef"+Math.random().toString(),e.next=5,f.b.createWithSeed(v.publicKey,r,y);case 5:return c=e.sent,i=new C({name:t,description:n,image_link:a,admin:v.publicKey.toBuffer(),amount_donated:0}),s=Object(x.serialize)(C.schema,i),u=new Uint8Array([0].concat(Object(b.a)(s))),e.next=11,g.getMinimumBalanceForRentExemption(s.length);case 11:return o=e.sent,console.log(s.length),l=f.c.createAccountWithSeed({fromPubkey:v.publicKey,basePubkey:v.publicKey,seed:r,newAccountPubkey:c,lamports:o,space:s.length,programId:y}),d=new f.e({keys:[{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:v.publicKey,isSigner:!0}],programId:y,data:u}),e.next=17,w([l,d]);case 17:return j=e.sent,e.next=20,N(j);case 20:return h=e.sent,e.next=23,g.confirmTransaction(h);case 23:m=e.sent,console.log("end sendMessage",m);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return P.apply(this,arguments)}function P(){return(P=Object(l.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.getProgramAccounts(y);case 2:return t=e.sent,n=[],t.forEach((function(e){try{var t=Object(x.deserialize)(C.schema,C,e.account.data);n.push({pubId:e.pubkey,name:t.name,description:t.description,image_link:t.image_link,amount_donated:t.amount_donated,admin:t.admin})}catch(a){console.log(a)}})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,t){return _.apply(this,arguments)}function _(){return(_=Object(l.a)(p.a.mark((function e(t,n){var a,r,c,i,s,u,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:return a="abcdef"+Math.random().toString(),e.next=5,f.b.createWithSeed(v.publicKey,a,y);case 5:return r=e.sent,c=f.c.createAccountWithSeed({fromPubkey:v.publicKey,basePubkey:v.publicKey,seed:a,newAccountPubkey:r,lamports:n,space:1,programId:y}),i=new f.e({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1},{pubkey:v.publicKey,isSigner:!0}],programId:y,data:new Uint8Array([2])}),e.next=10,w([c,i]);case 10:return s=e.sent,e.next=13,N(s);case 13:return u=e.sent,e.next=16,g.confirmTransaction(u);case 16:o=e.sent,console.log("end sendMessage",o);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}C.schema=new Map([[C,{kind:"struct",fields:[["admin",[32]],["name","string"],["description","string"],["image_link","string"],["amount_donated","u64"]]}]]);var E=Object(j.a)((function e(t){var n=this;Object(h.a)(this,e),Object.keys(t).forEach((function(e){n[e]=t[e]}))}));function R(e,t){return B.apply(this,arguments)}function B(){return(B=Object(l.a)(p.a.mark((function e(t,n){var a,r,c,i,s,u,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:return a=new E({amount:n}),r=Object(x.serialize)(E.schema,a),c=new Uint8Array([1].concat(Object(b.a)(r))),i=new f.e({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:v.publicKey,isSigner:!0}],programId:y,data:c}),e.next=8,w([i]);case 8:return s=e.sent,e.next=11,N(s);case 11:return u=e.sent,e.next=14,g.confirmTransaction(u);case 14:o=e.sent,console.log("end sendMessage",o);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}E.schema=new Map([[E,{kind:"struct",fields:[["amount","u64"]]}]]);var D=function(e){var t=e.data,n=e.setCards,r=Object(a.useState)(0),c=Object(s.a)(r,2),i=c[0],o=c[1],d=function(){var e=Object(l.a)(p.a.mark((function e(a){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,W(t.id,i);case 3:return e.next=5,M();case 5:r=e.sent,n(r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(l.a)(p.a.mark((function e(a){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,R(t.id,i);case 4:alert("Withdraw successful!"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0),alert("only admin can withdraw");case 11:return e.next=13,M();case 13:r=e.sent,n(r);case 15:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsx)("div",{children:Object(u.jsxs)("div",{className:"ui card fluid",children:[Object(u.jsx)("div",{className:"image",children:Object(u.jsx)("img",{src:t.image})}),Object(u.jsxs)("div",{className:"content",children:[Object(u.jsx)("div",{className:"header",children:t.title}),Object(u.jsx)("div",{children:Object(u.jsxs)("span",{children:["Raised: ",t.amount]})}),Object(u.jsx)("p",{children:t.description}),Object(u.jsx)("form",{className:"ui form container",children:Object(u.jsx)("div",{className:"ui grid",children:Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"column thirteen wide",children:Object(u.jsx)("div",{className:"field",children:Object(u.jsx)("input",{type:"text",name:"amount",placeholder:"Amount to donate",onChange:function(e){return o(e.target.value)}})})}),Object(u.jsx)("div",{className:"column",children:Object(u.jsx)("button",{className:"ui button",type:"submit",onClick:function(e){return d(e)},children:"Donate"})})]})})}),Object(u.jsx)("div",{children:"Only admin can withdraw "}),Object(u.jsx)("form",{className:"ui form container",children:Object(u.jsx)("div",{className:"ui grid",children:Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"column thirteen wide",children:Object(u.jsx)("div",{className:"field",children:Object(u.jsx)("input",{type:"text",name:"amount",placeholder:"Amount to withdraw",onChange:function(e){return o(e.target.value)}})})}),Object(u.jsx)("div",{className:"column",children:Object(u.jsx)("button",{className:"ui button",type:"submit",onClick:function(e){return b(e)},children:"Withdraw"})})]})})})]})]})})},U=function(e){var t=e.setRoute,n=Object(a.useState)(""),r=Object(s.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)(""),d=Object(s.a)(o,2),b=d[0],j=d[1],h=Object(a.useState)(""),m=Object(s.a)(h,2),f=m[0],x=m[1],O=function(){var e=Object(l.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,K(c,b,f);case 3:t(0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsxs)("form",{className:"ui form",children:[Object(u.jsxs)("div",{className:"field",children:[Object(u.jsx)("label",{children:"Title"}),Object(u.jsx)("input",{type:"text",name:"title",placeholder:"Title",onChange:function(e){return i(e.target.value)}})]}),Object(u.jsxs)("div",{className:"field",children:[Object(u.jsx)("label",{children:"Description"}),Object(u.jsx)("input",{type:"text",name:"description",placeholder:"Description",onChange:function(e){return j(e.target.value)}})]}),Object(u.jsxs)("div",{className:"field",children:[Object(u.jsx)("label",{children:"Image Link"}),Object(u.jsx)("input",{type:"text",name:"imageLink",placeholder:"imageLink",onChange:function(e){return x(e.target.value)}})]}),Object(u.jsx)("button",{className:"ui button",type:"submit",onClick:O,children:"Submit"})]})},z=function(){var e=Object(a.useState)(0),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),i=Object(s.a)(c,2),l=i[0],d=i[1];return Object(a.useEffect)((function(){M().then((function(e){d(e),console.log(e)}))}),[]),Object(u.jsxs)("div",{className:"ui container",children:[Object(u.jsx)(o,{setRoute:r}),0===n?Object(u.jsx)("div",{children:l.map((function(e,t){return Object(u.jsx)(D,{data:{title:e.name,description:e.description,amount:e.amount_donated.toString(),image:e.image_link,id:e.pubId},setCards:d},e.pubId.toString())}))}):Object(u.jsx)(U,{setRoute:function(e){r(e),M().then((function(e){d(e)}))}})]})};i.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(z,{})}),document.getElementById("root"))},77:function(e,t,n){},80:function(e,t){},84:function(e,t){}},[[126,1,2]]]);
//# sourceMappingURL=main.5cd14a5c.chunk.js.map